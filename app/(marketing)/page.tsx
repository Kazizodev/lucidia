import { Metadata } from "next"
import axiosApi from "@/lib/axios"
import { ProductModel } from "@/types/ProductModel"
import { BillboardModel } from "@/types/BillboardModel"
import HeroSection from "@/components/Pages/(marketing)/home/hero"
import ProductCard from "@/components/Pages/(marketing)/home/product-card"

export const metadata: Metadata = {
  title: "Home",
  description: "Generated by create next app",
}

const getBillboards = async () => {
  try {
    const res = await axiosApi.get("/billboards?isActive=true")
    return res.data
  } catch (error) {
    console.log(error)
  }
}
const getProducts = async () => {
  try {
    const res = await axiosApi.get("/products?isFeatured=true")
    return res.data
  } catch (error) {
    console.log(error)
  }
}

export default async function Home() {
  const products = (await getProducts()) as ProductModel[]
  const billboards = (await getBillboards()) as BillboardModel[]

  return (
    <main className="container">
      <HeroSection billboards={billboards} />

      <section>
        <h3>Featured</h3>
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 py-4 sm:py-6 lg:py-8">
          {products.map((product, i) => (
            <ProductCard data={product} key={i} />
          ))}
        </div>
        <h3>Featured Drinks</h3>
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 py-4 sm:py-6 lg:py-8">
          {products.map((product, i) => (
            <ProductCard data={product} key={i} />
          ))}
        </div>
        <h3>Featured Burgers</h3>
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 py-4 sm:py-6 lg:py-8">
          {products.map((product, i) => (
            <ProductCard data={product} key={i} />
          ))}
        </div>
      </section>
    </main>
  )
}
